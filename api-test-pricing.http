### Pricing Plans API Testing

@baseUrl = http://localhost:8080/api
@adminToken = YOUR_ADMIN_TOKEN_HERE
@editorToken = YOUR_EDITOR_TOKEN_HERE

### ============================================
### PUBLIC ENDPOINTS (No Auth Required)
### ============================================

### Get all pricing plans (Indonesian - default)
GET {{baseUrl}}/pricing-plans
Content-Type: application/json

### Get all pricing plans (English)
GET {{baseUrl}}/pricing-plans?locale=en
Content-Type: application/json

### Get all pricing plans (Indonesian - explicit)
GET {{baseUrl}}/pricing-plans?locale=id
Content-Type: application/json

### Get single pricing plan (Indonesian)
GET {{baseUrl}}/pricing-plans/1
Content-Type: application/json

### Get single pricing plan (English)
GET {{baseUrl}}/pricing-plans/1?locale=en
Content-Type: application/json

### Get pricing plan with Accept-Language header
GET {{baseUrl}}/pricing-plans/1
Accept-Language: en-US
Content-Type: application/json

### ============================================
### ADMIN ENDPOINTS (Authentication Required)
### ============================================

### Get all pricing plans (Admin view with all translations)
GET {{baseUrl}}/pricing-plans/admin/all
Authorization: Bearer {{adminToken}}
Content-Type: application/json

### Get all pricing plans with pagination
GET {{baseUrl}}/pricing-plans/admin/all?page=1&limit=5
Authorization: Bearer {{adminToken}}
Content-Type: application/json

### Search pricing plans
GET {{baseUrl}}/pricing-plans/admin/all?search=starter
Authorization: Bearer {{adminToken}}
Content-Type: application/json

### Filter active plans only
GET {{baseUrl}}/pricing-plans/admin/all?isActive=true
Authorization: Bearer {{adminToken}}
Content-Type: application/json

### Create new pricing plan
POST {{baseUrl}}/pricing-plans/admin
Authorization: Bearer {{adminToken}}
Content-Type: application/json

{
  "planCode": "CUSTOM",
  "pricePerUserMonth": 45000,
  "minUsers": 5,
  "maxUsers": 20,
  "displayOrder": 4,
  "badgeColor": "#F59E0B",
  "translations": {
    "id": {
      "planName": "Paket Custom",
      "pricePeriod": "per pengguna/bulan",
      "userRange": "5-20 pengguna",
      "description": "Paket khusus untuk kebutuhan spesifik"
    },
    "en": {
      "planName": "Custom Plan",
      "pricePeriod": "per user/month",
      "userRange": "5-20 users",
      "description": "Special plan for specific needs"
    }
  }
}

### Create plan without English translation (valid)
POST {{baseUrl}}/pricing-plans/admin
Authorization: Bearer {{adminToken}}
Content-Type: application/json

{
  "planCode": "BASIC",
  "pricePerUserMonth": 25000,
  "minUsers": 1,
  "maxUsers": 5,
  "displayOrder": 0,
  "badgeColor": "#6B7280",
  "translations": {
    "id": {
      "planName": "Paket Basic",
      "pricePeriod": "per pengguna/bulan",
      "userRange": "1-5 pengguna",
      "description": "Paket paling terjangkau"
    }
  }
}

### Update pricing plan
PUT {{baseUrl}}/pricing-plans/admin/1
Authorization: Bearer {{adminToken}}
Content-Type: application/json

{
  "pricePerUserMonth": 55000,
  "badgeColor": "#EF4444",
  "translations": {
    "id": {
      "planName": "Paket Starter Plus",
      "description": "Paket starter dengan fitur tambahan"
    },
    "en": {
      "planName": "Starter Plus Plan",
      "description": "Starter plan with additional features"
    }
  }
}

### Update only base fields (no translations)
PUT {{baseUrl}}/pricing-plans/admin/1
Authorization: Bearer {{adminToken}}
Content-Type: application/json

{
  "pricePerUserMonth": 52000,
  "isActive": true
}

### Deactivate pricing plan
PUT {{baseUrl}}/pricing-plans/admin/1
Authorization: Bearer {{adminToken}}
Content-Type: application/json

{
  "isActive": false
}

### Delete pricing plan (soft delete)
DELETE {{baseUrl}}/pricing-plans/admin/1
Authorization: Bearer {{adminToken}}

### ============================================
### VALIDATION TESTS
### ============================================

### Try to create without Indonesian translation (should fail)
POST {{baseUrl}}/pricing-plans/admin
Authorization: Bearer {{adminToken}}
Content-Type: application/json

{
  "planCode": "INVALID",
  "pricePerUserMonth": 50000,
  "minUsers": 1,
  "displayOrder": 1,
  "translations": {
    "en": {
      "planName": "Invalid Plan"
    }
  }
}

### Try to create with duplicate planCode (should fail)
POST {{baseUrl}}/pricing-plans/admin
Authorization: Bearer {{adminToken}}
Content-Type: application/json

{
  "planCode": "STARTER",
  "pricePerUserMonth": 50000,
  "minUsers": 1,
  "displayOrder": 1,
  "translations": {
    "id": {
      "planName": "Duplicate Starter"
    }
  }
}

### Try to access admin endpoint without auth (should fail)
GET {{baseUrl}}/pricing-plans/admin/all
Content-Type: application/json

### Try to create plan as Editor (should fail - Admin only)
POST {{baseUrl}}/pricing-plans/admin
Authorization: Bearer {{editorToken}}
Content-Type: application/json

{
  "planCode": "UNAUTHORIZED",
  "pricePerUserMonth": 50000,
  "minUsers": 1,
  "displayOrder": 1,
  "translations": {
    "id": {
      "planName": "Unauthorized Plan"
    }
  }
}
